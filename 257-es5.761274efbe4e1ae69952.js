!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(self.webpackChunkmelodia_ui=self.webpackChunkmelodia_ui||[]).push([[257],{86257:function(n,i,u){"use strict";u.r(i),u.d(i,{ProfileModule:function(){return v}});var r,o,a=u(38583),s=u(99763),l=u(91e3),c=u(37716),d=u(86665),Z=u(14358),f=u(13030),b=function(){var n=function(){function n(){e(this,n)}return t(n,[{key:"ngOnInit",value:function(){}},{key:"findRolesString",value:function(e){return e.roles.map(function(e){return e.name}).join(", ")}}]),n}();return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ngx-details-form"]],inputs:{user:"user"},decls:27,vars:5,consts:[[1,"m-4"],["for","name"],["id","name","type","text","nbInput","","fullWidth","","status","basic",3,"value"],["for","surname"],["id","surname","type","text","nbInput","","fullWidth","","status","basic",3,"value"],["for","email"],["nbPrefix","","icon","at-outline"],["id","email","type","email","nbInput","","fullWidth","","status","basic",3,"value"],["for","roles"],["id","roles","type","text","nbInput","","fullWidth","","status","basic","disabled","",3,"value"],["for","enabled"],["id","enabled"],["disabled","",3,"checked"]],template:function(e,n){1&e&&(c.TgZ(0,"nb-card"),c.TgZ(1,"nb-card-header"),c._uU(2,"Perfil de usuario"),c.qZA(),c.TgZ(3,"nb-card-body"),c.TgZ(4,"div",0),c.TgZ(5,"label",1),c._uU(6,"Nombre:"),c.qZA(),c._UZ(7,"input",2),c.qZA(),c.TgZ(8,"div",0),c.TgZ(9,"label",3),c._uU(10,"Apellidos:"),c.qZA(),c._UZ(11,"input",4),c.qZA(),c.TgZ(12,"div",0),c.TgZ(13,"label",5),c._uU(14,"Email:"),c.qZA(),c.TgZ(15,"nb-form-field"),c._UZ(16,"nb-icon",6),c._UZ(17,"input",7),c.qZA(),c.qZA(),c.TgZ(18,"div",0),c.TgZ(19,"label",8),c._uU(20,"Roles:"),c.qZA(),c._UZ(21,"input",9),c.qZA(),c.TgZ(22,"div",0),c.TgZ(23,"label",10),c._uU(24,"Enabled:"),c.qZA(),c.TgZ(25,"div",11),c._UZ(26,"nb-toggle",12),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(7),c.Q6J("value",n.user.name),c.xp6(4),c.Q6J("value",n.user.surname),c.xp6(6),c.Q6J("value",n.user.email),c.xp6(4),c.Q6J("value",n.findRolesString(n.user)),c.xp6(5),c.Q6J("checked",n.user.enabled))},directives:[f.Asz,f.ndF,f.yKW,f.h8i,f.jBG,f.fMN,f.t3q,f.BLq],styles:[""]}),n}(),g=[{path:"",component:(r=function(){function n(t,i,u){e(this,n),this.authService=t,this.userService=i,this.toastrService=u,this.user=new l.n5,this.loadingToken=!1,this.token=""}return t(n,[{key:"ngOnInit",value:function(){var e=this;this.authService.onTokenChange().subscribe(function(n){if(n.isValid()){var t=n.getPayload().id;e.userService.getUser(t).subscribe(function(n){return e.user=n})}})}},{key:"generateToken",value:function(e){var n=this;this.loadingToken=!0,this.userService.generateToken(e,this.user.id).subscribe(function(e){n.loadingToken=!1,n.token=e.token,n.toastrService.success("Token generado con \xe9xito!","\xc9xito")},function(e){n.loadingToken=!1,n.toastrService.danger(e.error.message,"ERROR")})}}]),n}(),r.\u0275fac=function(e){return new(e||r)(c.Y36(d._o),c.Y36(Z.K),c.Y36(f.quB))},r.\u0275cmp=c.Xpm({type:r,selectors:[["ngx-profile"]],decls:25,vars:2,consts:[[3,"user"],[1,"row","my-4"],[1,"col"],["fullWidth","","selected","86400000"],["value","86400000"],["value","1296000000"],["value","2592000000"],["value","5184000000"],["nbButton","",3,"click"],["nbInput","","fullWidth","","placeholder","Elige duraci\xf3n y pulsa 'Generar' para crear un nuevo token",3,"value"]],template:function(e,n){1&e&&(c.TgZ(0,"nb-layout"),c.TgZ(1,"nb-layout-column"),c._UZ(2,"ngx-details-form",0),c.qZA(),c.TgZ(3,"nb-layout-column"),c.TgZ(4,"nb-card"),c.TgZ(5,"nb-card-header"),c._uU(6,"Token personal"),c.qZA(),c.TgZ(7,"nb-card-body"),c.TgZ(8,"p"),c._uU(9,"Aqu\xed para el token"),c.qZA(),c.TgZ(10,"div",1),c.TgZ(11,"div",2),c.TgZ(12,"nb-select",3),c.TgZ(13,"nb-option",4),c._uU(14,"1 D\xeda"),c.qZA(),c.TgZ(15,"nb-option",5),c._uU(16,"15 D\xedas"),c.qZA(),c.TgZ(17,"nb-option",6),c._uU(18,"1 Mes"),c.qZA(),c.TgZ(19,"nb-option",7),c._uU(20,"2 Meses"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"div",2),c.TgZ(22,"button",8),c.NdJ("click",function(){return n.generateToken(1e7)}),c._uU(23,"Generar"),c.qZA(),c.qZA(),c.qZA(),c._UZ(24,"textarea",9),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("user",n.user),c.xp6(22),c.Q6J("value",n.token))},directives:[f.Aqw,f.dP_,b,f.Asz,f.ndF,f.yKW,f.rs,f.q51,f.DPz,f.h8i],styles:[""]}),r)}],p=function(){var n=function n(){e(this,n)};return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[s.Bz.forChild(g)],s.Bz]}),n}(),v=((o=function n(){e(this,n)}).\u0275fac=function(e){return new(e||o)},o.\u0275mod=c.oAB({type:o}),o.\u0275inj=c.cJS({imports:[[a.ez,p,f.nKr,f.zyh,f.V7y,f.KdK,f.BW0,f.T2N,f.IIj,f.wB1]]}),o)}}])}();