(self.webpackChunkmelodia_ui=self.webpackChunkmelodia_ui||[]).push([[257],{86257:function(e,n,t){"use strict";t.r(n),t.d(n,{ProfileModule:function(){return g}});var i=t(38583),s=t(99763),r=t(91e3),u=t(37716),a=t(86665),o=t(14358),l=t(13030);let c=(()=>{class e{constructor(){}ngOnInit(){}findRolesString(e){return e.roles.map(e=>e.name).join(", ")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["ngx-details-form"]],inputs:{user:"user"},decls:27,vars:5,consts:[[1,"m-4"],["for","name"],["id","name","type","text","nbInput","","fullWidth","","status","basic",3,"value"],["for","surname"],["id","surname","type","text","nbInput","","fullWidth","","status","basic",3,"value"],["for","email"],["nbPrefix","","icon","at-outline"],["id","email","type","email","nbInput","","fullWidth","","status","basic",3,"value"],["for","roles"],["id","roles","type","text","nbInput","","fullWidth","","status","basic","disabled","",3,"value"],["for","enabled"],["id","enabled"],["disabled","",3,"checked"]],template:function(e,n){1&e&&(u.TgZ(0,"nb-card"),u.TgZ(1,"nb-card-header"),u._uU(2,"Perfil de usuario"),u.qZA(),u.TgZ(3,"nb-card-body"),u.TgZ(4,"div",0),u.TgZ(5,"label",1),u._uU(6,"Nombre:"),u.qZA(),u._UZ(7,"input",2),u.qZA(),u.TgZ(8,"div",0),u.TgZ(9,"label",3),u._uU(10,"Apellidos:"),u.qZA(),u._UZ(11,"input",4),u.qZA(),u.TgZ(12,"div",0),u.TgZ(13,"label",5),u._uU(14,"Email:"),u.qZA(),u.TgZ(15,"nb-form-field"),u._UZ(16,"nb-icon",6),u._UZ(17,"input",7),u.qZA(),u.qZA(),u.TgZ(18,"div",0),u.TgZ(19,"label",8),u._uU(20,"Roles:"),u.qZA(),u._UZ(21,"input",9),u.qZA(),u.TgZ(22,"div",0),u.TgZ(23,"label",10),u._uU(24,"Enabled:"),u.qZA(),u.TgZ(25,"div",11),u._UZ(26,"nb-toggle",12),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(7),u.Q6J("value",n.user.name),u.xp6(4),u.Q6J("value",n.user.surname),u.xp6(6),u.Q6J("value",n.user.email),u.xp6(4),u.Q6J("value",n.findRolesString(n.user)),u.xp6(5),u.Q6J("checked",n.user.enabled))},directives:[l.Asz,l.ndF,l.yKW,l.h8i,l.jBG,l.fMN,l.t3q,l.BLq],styles:[""]}),e})();const d=[{path:"",component:(()=>{class e{constructor(e,n,t){this.authService=e,this.userService=n,this.toastrService=t,this.user=new r.n5,this.loadingToken=!1,this.token=""}ngOnInit(){this.authService.onTokenChange().subscribe(e=>{if(e.isValid()){const n=e.getPayload().id;this.userService.getUser(n).subscribe(e=>this.user=e)}})}generateToken(e){this.loadingToken=!0,this.userService.generateToken(e,this.user.id).subscribe(e=>{this.loadingToken=!1,this.token=e.token,this.toastrService.success("Token generado con \xe9xito!","\xc9xito")},e=>{this.loadingToken=!1,this.toastrService.danger(e.error.message,"ERROR")})}}return e.\u0275fac=function(n){return new(n||e)(u.Y36(a._o),u.Y36(o.K),u.Y36(l.quB))},e.\u0275cmp=u.Xpm({type:e,selectors:[["ngx-profile"]],decls:25,vars:2,consts:[[3,"user"],[1,"row","my-4"],[1,"col"],["fullWidth","","selected","86400000"],["value","86400000"],["value","1296000000"],["value","2592000000"],["value","5184000000"],["nbButton","",3,"click"],["nbInput","","fullWidth","","placeholder","Elige duraci\xf3n y pulsa 'Generar' para crear un nuevo token",3,"value"]],template:function(e,n){1&e&&(u.TgZ(0,"nb-layout"),u.TgZ(1,"nb-layout-column"),u._UZ(2,"ngx-details-form",0),u.qZA(),u.TgZ(3,"nb-layout-column"),u.TgZ(4,"nb-card"),u.TgZ(5,"nb-card-header"),u._uU(6,"Token personal"),u.qZA(),u.TgZ(7,"nb-card-body"),u.TgZ(8,"p"),u._uU(9,"Aqu\xed para el token"),u.qZA(),u.TgZ(10,"div",1),u.TgZ(11,"div",2),u.TgZ(12,"nb-select",3),u.TgZ(13,"nb-option",4),u._uU(14,"1 D\xeda"),u.qZA(),u.TgZ(15,"nb-option",5),u._uU(16,"15 D\xedas"),u.qZA(),u.TgZ(17,"nb-option",6),u._uU(18,"1 Mes"),u.qZA(),u.TgZ(19,"nb-option",7),u._uU(20,"2 Meses"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(21,"div",2),u.TgZ(22,"button",8),u.NdJ("click",function(){return n.generateToken(1e7)}),u._uU(23,"Generar"),u.qZA(),u.qZA(),u.qZA(),u._UZ(24,"textarea",9),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(2),u.Q6J("user",n.user),u.xp6(22),u.Q6J("value",n.token))},directives:[l.Aqw,l.dP_,c,l.Asz,l.ndF,l.yKW,l.rs,l.q51,l.DPz,l.h8i],styles:[""]}),e})()}];let Z=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[s.Bz.forChild(d)],s.Bz]}),e})(),g=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[i.ez,Z,l.nKr,l.zyh,l.V7y,l.KdK,l.BW0,l.T2N,l.IIj,l.wB1]]}),e})()}}]);